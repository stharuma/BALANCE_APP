<div class="col-md-12" style="padding: 0px;">
    <div class="well" collapse="isViewsCollapsed" style="padding-left: 50px; position: absolute; top: 0px; left: 50px; width: 50%; height: 400px; background-color: white; z-index: 100;">
        <div style="text-align: right; padding-right: 50px; padding-top: 5px;">
            <button type="submit" class="btn btn-primary kfbutton" ng-click="createViewlink()">close</button>
        </div>
        <label>View Link</label>
        <ul>
            <li>Click to go to view.</li>
            <li>Drag and drop to create a link.</li>
        </ul>

        <div style="height: 400px; overflow: scroll;">
            <div ng-repeat="view in views">
                <div viewlink style="white-space: nowrap;"><img draggable="false" src="manual_assets/kf4images/icon-view.gif"><a draggable="false" ng-href="view/{{view._id}}">{{view.title}}</a>
                </div>
            </div>
        </div>
    </div>

    <div class="well" collapse="status.isViewManagerCollapsed" style="padding-left: 50px; position: absolute; top: 0px; left: 50px; width: 50%; height: 400px; background-color: white; z-index: 100;">
        <div style="text-align: right; padding-right: 50px; padding-top: 5px;">
            <button type="submit" class="btn btn-primary kfbutton" ng-click="status.isViewManagerCollapsed = true;">close</button>
        </div>
        <div style="height: 400px; overflow: scroll;">
            <div ng-include="'app/viewmanager/viewmanager.html'" ng-controller="ViewmanagerCtrl"></div>
        </div>
    </div>

    <div class="well" collapse="isAttachmentCollapsed" style="padding-left: 50px; position: absolute; top: 0px; left: 50px; width: 50%; background-color: white; z-index: 100;">
        <div style="text-align: right; padding-right: 50px; padding-top: 5px;">
            <button type="submit" class="btn btn-primary kfbutton" ng-click="isAttachmentCollapsed = true;">close</button>
        </div>
        <div style="padding: 10px;">
            <div ng-include="'app/attachment/attachment.html'" ng-controller="AttachmentCtrl"></div>
        </div>
    </div>

    <div class="well" collapse="setting.isclosed" style="padding-left: 50px; position: absolute; top: 0px; left: 50px; width: 50%; background-color: white; z-index: 100;">
        <div style="text-align: right; padding-right: 50px; padding-top: 5px;">
            <button type="submit" class="btn btn-primary kfbutton" ng-click="setting.isclosed = true">close</button>
        </div>
        <div style="padding: 10px;">
            <input type="checkbox" ng-model="setting.buildson" ng-change="settingChanged()">buildson
            <input type="checkbox" ng-model="setting.references" ng-change="settingChanged()">reference
        </div>
    </div>

    <div class="KFViewNavBar" ng-if="!menuStatus">
        <table style="width: 100%;">
            <tr>
                <td>{{view.title}}</td>
            </tr>
        </table>
    </div>

    <div class='KFViewToolBar' ng-if="!menuStatus">
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="createNote()"><img src="manual_assets/kf4images/toolbar-newnote-small.png" title="Note"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="createDrawing()"><img src="manual_assets/kf4images/toolbar-palette-small.png" title="Graphic Note"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="openAttachment()"><img src="manual_assets/kf4images/toolbar-newattachment-small.png" title="Attachment"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="createViewlink()"><img src="manual_assets/kf4images/toolbar-newviewlink-small.png" title="Views"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="openSearch()"><img src="manual_assets/kf4images/toolbar-search-small.png" title="Search"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="openWorkspace()"><img src="manual_assets/kf4images/toolbar-workspace-small.png" title="Workspace"></button>
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="status.isViewManagerCollapsed = !status.isViewManagerCollapsed;"><img src="manual_assets/kf4images/toolbar-viewlist-small.png" title="View Manager"></button>            
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="openScaffolds();"><img src="manual_assets/kf4images/toolbar-scaffolds-small.png" title="Scaffold"></button>            
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="setting.isclosed = !setting.isclosed"><img src="manual_assets/kf4images/button-info.gif" title="View Setting"></button>                
            </span>
        </span>
        <span class="input-group">
            <span class="input-group-btn">
                <button type="submit" style="width: 40px;" class="btn btn-primary kfbutton" ng-click="doExit()"><img src="manual_assets/kf4images/toolbar-logout-small.png" title="Exit Community"></button>
            </span>
        </span>
    </div>

    <div id="maincanvas" class="KFViewMainCanvas">
        <div id="viewcanvas" class="KFViewContributionCanvas">
            <div ng-attr-id="{{ref._id}}" class="KFViewRef" ng-repeat="ref in refs" ng-style="{'top': ref.data.y, 'left': ref.data.x}" style="line-height: 100%;" ng-mousedown="mouseDown(this)" context-menu="onContextOpen(this)" data-target="menu-A">
                <div ng-if="ref.data.showInPlace!==true" style="white-space: nowrap; font-size: 12px;">
                    <div ng-click="openContribution(ref.to)" ng-if="ref._to.type !== 'View'">
                        <span ng-attr-id="icon{{ref._id}}" ng-attr-class="icon{{ref.to}}"> 
                            <img ng-src="{{ref.getIcon()}}" draggable="false">
                        </span>
                        <a class='kfIcon'>{{ref._to.title}}</a>
                    </div>
                    <div ng-if="ref._to.type === 'View'" style="white-space: nowrap;">
                        <span ng-attr-id="icon{{ref._id}}" ng-attr-class="icon{{ref.to}}">
                            <img ng-src="{{ref.getIcon()}}" draggable="false">
                        </span>
                        <a ng-click="openView(ref.to)" style="color: #0000FF;">{{ref._to.title}}</a>
                    </div>
                    <span ng-click="openContribution(ref.to)" style="font-size: 10px; color: #777777; white-space: nowrap;">
                        {{ref.getAuthorString()}}
                    </span>
                </div>
                <div ng-if="ref.data.showInPlace===true" ng-style="{'width': ref.data.width, 'height': ref.data.height}" ng-attr-id="icon{{ref._id}}" ng-attr-class="icon{{ref.to}}">
                    <div ng-if="ref._to.type === 'Drawing'" ng-bind-html="ref.contribution.data.svg"></div>
                    <div ng-if="ref._to.type === 'Attachment'">
                        <div ng-if="ref.contribution.data.type.indexOf('image/')>=0">
                            <img ng-attr-src="{{ref.contribution.data.url}}" ng-style="{'width': ref.data.width, 'height': ref.data.height}">
                        </div>
                        <div ng-if="ref.contribution.mime.indexOf('image/')<0">
                            <a ng-attr-href="{{ref.contribution.url}}">{{ref.contribution.title}}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- for selection proxy-->
        <div id="selectioncanvas" class="KFViewSelectedCanvas"></div>
        <div id="dropcanvas" class="KFViewDropCanvas KFViewMarqueeCanvas"></div>
        <div id="windows" class="KFViewWindowsCanvas"></div>
    </div>

    <div class="dropdown position-fixed" id="menu-A" style="position: absolute; z-index: 20;">
        <ul class="dropdown-menu" role="menu">
            <li ng-if="contextTarget.data !== null && contextTarget._to.type !== 'View'" class="menuitem" ng-click="mOpenContribution()">Open</li>
            <li ng-if="contextTarget.data !== null && contextTarget._to.type !== 'View'" class="menuitem" ng-click="mOpenContributionInTab()">Open In Tab</li>
            <li ng-if="contextTarget.data !== null && contextTarget._to.type !== 'View'" class="menuitem" ng-click="mOpenContributionInPopup()">Open In Window</li>
            <li ng-if="contextTarget.data !== null && contextTarget._to.type === 'View'" class="menuitem" ng-click="mOpenView()">Open</li>
            <li ng-if="contextTarget.data !== null && contextTarget._to.type === 'View'" class="menuitem" ng-click="mOpenViewInInternal()">Open In Internal</li>
            <li ng-if="contextTarget.data !== null && contextTarget._to.type === 'View'" class="menuitem" ng-click="mOpenViewInPopup()">Open In Window</li>
            <li ng-if="contextTarget.data !== null" class="menuitem" ng-click="delete()">Delete</li>
            <li ng-if="contextTarget.data.showInPlace === true" class="menuitem" ng-click="showAsIcon()">ShowAsIcon</li>
            <li ng-if="contextTarget.data.showInPlace !== true" class="menuitem" ng-click="showInPlace()">ShowInPlace</li>
            <li ng-if="contextTarget.data.fixed !== true" class="menuitem" ng-click="fix()">Fix</li>
            <li ng-if="contextTarget.data.fixed === true" class="menuitem" ng-click="unfix()">Unfix</li>
            <li ng-if="true" class="menuitem" ng-click="createRiseabove()">Riseabove</li>
        </ul>
    </div>

</div>