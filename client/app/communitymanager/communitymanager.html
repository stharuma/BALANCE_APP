<div class="col-md-12" style="padding-left: 50px;">
    <label>{{ 'kbc_myKBCsTitle' | translate }}:</label>
    <table>
        <tr ng-repeat="registration in myRegistrations | orderBy:'_community.title'" class="tableRow">
            <td style="padding-left: 20px;">{{registration._community.title}}</td>
            <td style="padding-left: 10px;">
                <!-- TODO i18n (created: {{toTimeString(registration._community.created)}}) -->
            </td>
            <td style="padding-left: 20px;">
                <!-- TODO i18n {{registration.role}} -->
            </td>
            <td style="padding-left: 20px;">
                <button ng-click="enterCommunity(registration)">{{ 'community_enter' | translate }}</button>
            </td>
            <td ng-show="adminmode" style="padding-left: 20px;"><a href='communityeditor/{{registration.communityId}}'>Manage</a>
            </td>
        </tr>
    </table>
    <div style="height: 100px;"></div>
    <label>{{ 'community_join' | translate }}:</label>
    <div style="padding-left: 50px;">
        <table>
            <tr>
                <td style="text-align: right;">{{ 'community' | translate }}:</td>
                <td>
                    <ui-select ng-model="selected.community" theme="bootstrap" ng-disabled="disabled" style="width: 400px;">
                        <ui-select-match placeholder="{{ 'community_select' | translate }}">{{selected.community.title}} &lt;{{toTimeString(selected.community.created)}}&gt;</ui-select-match>
                        <ui-select-choices repeat="community in communities | filter: {title: $select.search} | orderBy:'created':true | orderBy:'title'">
                            <div ng-bind-html="community.title | highlight: $select.search"></div>
                            <small><div ng-bind-html="toTimeString(community.created)"></div></small>
                        </ui-select-choices>
                    </ui-select>
                    <p style="text-align: right;">{{communities.length}} {{ 'community_possible' | translate }}.</p>
                </td>
            </tr>
            <tr>
                <td style="text-align: right;">{{ 'community_registration_key' | translate }}:</td>
                <td>
                    <input type="text" class="form-control" placeholder="" ng-model="selected.key">
                </td>
            </tr>
            <tr>
                <td></td>
                <td style="float: right;">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" ng-click="addRegistration()">{{ 'join' | translate }}</button>
                    </span>
                </td>
        </table>
    </div>
    <br>
    <div ng-show="isAdmin()">
        <label>{{ 'community_create' | translate }}:</label>
        <div style="padding-left: 50px;">
            <table>
                <tr>
                    <td style="text-align: right;">{{ 'title' | translate }}:</td>
                    <td style="width: 400px;">
                        <input type="text" class="form-control" placeholder="" ng-model="newCommunity.title">
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right;">{{ 'community_registration_key' | translate }}:</td>
                    <td>
                        <input type="text" class="form-control" placeholder="" ng-model="newCommunity.key">
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="float: right;">
                        <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" ng-click="addNewCommunity()">{{ 'add' | translate }}</button>
                    </span>
                    </td>
            </table>
        </div>
    </div>
    <div style="height: 10px;">
        <div ng-show="isAdmin()">
            <label>AdminMode</label>
            <br>
            <button type="submit" class="btn btn-primary" ng-click="adminmode = true;">Admin Mode</button>
        </div>
    </div>
</div>
